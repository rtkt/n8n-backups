{
  "createdAt": "2023-10-09T14:05:31.043Z",
  "updatedAt": "2023-10-24T04:28:11.000Z",
  "id": "4kNCxXHkkf3HnPU5",
  "name": "–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —à–∞–±–ª–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö",
  "active": true,
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 2
            }
          ]
        }
      },
      "id": "fce11d2d-f50c-4b7c-bccc-7f66e7028b00",
      "name": "–ò–Ω—Ç–µ—Ä–≤–∞–ª",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        1140,
        540
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "cf149754-de19-4c6c-be23-a1eb821c30ca",
          "mode": "list",
          "cachedResultName": "–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á",
          "cachedResultUrl": "https://www.notion.so/cf149754de194c6cbe23a1eb821c30ca"
        },
        "returnAll": true,
        "simple": false,
        "filterType": "manual",
        "matchType": "allFilters",
        "filters": {
          "conditions": [
            {
              "key": "–®–∞–±–ª–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞|checkbox",
              "condition": "equals",
              "checkboxValue": true
            },
            {
              "key": "–°—Ç–∞—Ç—É—Å|select",
              "condition": "does_not_equal",
              "selectValue": "={{ $json.statuses.done }}"
            },
            {
              "key": "–°—Ç–∞—Ç—É—Å|select",
              "condition": "does_not_equal",
              "selectValue": "={{ $json.statuses.cancelled }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a550adcf-9d7c-4859-a268-6507c9ca8470",
      "name": "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        1660,
        540
      ],
      "retryOnFail": true,
      "credentials": {
        "notionApi": {
          "id": "4",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $json.id }}",
        "value": "={{ JSON.stringify($json) }}",
        "keyType": "string",
        "expire": true,
        "ttl": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.redis.expiry * 60 * 60 * 24 }}"
      },
      "id": "1ec6cd1f-83da-48a8-885b-7e10c209b7c0",
      "name": "–ü–∏—à–µ–º –¥–∞–Ω–Ω—ã–µ",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        3700,
        760
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "operation": "keys",
        "keyPattern": "????????-????-????-????-????????????"
      },
      "id": "0792c46c-c787-4c89-b048-b6f01b5d88fe",
      "name": "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        1660,
        120
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return Object.keys($input.first().json).map(page => {\n  return {\n    json: JSON.parse($input.first().json[page])\n  };\n});"
      },
      "id": "3546539a-9999-456a-a647-831c164f2c30",
      "name": "–†–∞–∑–±–∏–≤–∞–µ–º –∏ –ø–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1900,
        120
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const page = JSON.parse(JSON.stringify($input.item.json));\nconst fields = $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.properties;\nconst process = {\n  number: (field, fields, page) => {\n    return page.properties[fields[field]].number;\n  },\n  multi_select: (field, fields, page) => {\n    return page.properties[fields[field]].multi_select.map(element => element.name);\n  },\n  select: (field, fields, page) => {\n    return page.properties[fields[field]].select.name;\n  },\n  checkbox: (field, fields, page) => {\n    return page.properties[fields[field]].checkbox;\n  },\n  date: (field, fields, page) => {\n    return page.properties[fields[field]].date;\n  },\n  rich_text: (field, fields, page) => {\n    return page.properties[fields[field]].rich_text?.plain_text;\n  },\n  title: (field, fields, page) => {\n    return page.properties[fields[field]].title[0].plain_text;\n  }\n};\n\nObject.keys(fields).forEach(field => {\n  // console.log(`Property is ${fields[field]}, type is ${page.properties[fields[field]].type}`);\n  page[field] = process[page.properties[fields[field]].type](field, fields, page);\n});\n\ndelete page.properties;\ndelete page.cover;\ndelete page.icon;\ndelete page.created_by;\ndelete page.last_edited_by;\n\nreturn {\n  json: page\n};"
      },
      "id": "d318624c-b8e7-4f40-bae3-9e00152f36f0",
      "name": "–ß–∏—Å—Ç–∫–∞",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1900,
        540
      ]
    },
    {
      "parameters": {},
      "id": "33bc41c6-5016-4b9a-81c0-2b31479db0cf",
      "name": "–û–±—ä–µ–¥–∏–Ω—è–µ–º",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        2440,
        540
      ]
    },
    {
      "parameters": {
        "operation": "concatenateItems",
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "current",
        "options": {}
      },
      "id": "ec6db284-6376-4325-aa60-21c6e57720f3",
      "name": "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        2160,
        540
      ]
    },
    {
      "parameters": {
        "operation": "concatenateItems",
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "db",
        "options": {}
      },
      "id": "6a36bc48-0756-46a0-9db9-08dc3fbd107e",
      "name": "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º1",
      "type": "n8n-nodes-base.itemLists",
      "typeVersion": 3,
      "position": [
        2160,
        340
      ]
    },
    {
      "parameters": {
        "jsCode": "const tasks = [];\nconst db = $input.first().json?.db ? JSON.parse(JSON.stringify($input.first().json.db)) : undefined;\nconst current = JSON.parse(JSON.stringify($input.last().json.current));\nconst add = (page, type) => {\n  tasks.push({\n    json: JSON.parse(JSON.stringify(page))\n  });\n  tasks[tasks.length - 1].json.type = type;\n  if (db) {\n    tasks[tasks.length - 1].json.lastNotification = find(db, page.id)?.lastNotification;\n  };\n};\nif (! db) {\n  current.forEach(task => add(task, \"new\"));\n  return tasks;\n};\nconst find = (pages, id) => {\n  const output = pages.filter(page => {\n    return page.id === id;\n  });\n  // console.log(`Found ${JSON.stringify(output)}`);\n  return output[0];\n};\ncurrent.forEach(page => {\n  const dbEntry = find(db, page.id);\n  if (! dbEntry || ! dbEntry?.lastNotification) {\n    add(page, \"new\");\n    return;\n  };\n  if (JSON.stringify(page) === JSON.stringify(dbEntry)) {\n    add(page, \"unchaged\");\n  } else {\n    add(page, \"updated\");\n  };\n});\ndb.forEach(page => {\n  const currentEntry = find(current, page.id);\n  // console.log(currentEntry);\n  if (! currentEntry ) {\n    add(page, \"missed\");\n  };\n});\nreturn tasks;"
      },
      "id": "03215a30-7c0b-49fa-b0bb-3cf7b193c76b",
      "name": "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2680,
        540
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.chatid }}",
        "text": "={{ $json.message }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—ã–ø–æ–ª–Ω–µ–Ω–æ",
                    "additionalFields": {
                      "callback_data": "={{ JSON.stringify({ type: \"endTask\", id: $json.id }) }}"
                    }
                  },
                  {
                    "text": "–û—Ç–∫—Ä—ã—Ç—å",
                    "additionalFields": {
                      "url": "={{ $json.url }}"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "disable_notification": "={{ $execution.mode === \"test\" ? true : false }}",
          "parse_mode": "HTML"
        }
      },
      "id": "23cd3502-3dca-4461-93dc-5d8bdcfe7870",
      "name": "–°–æ–æ–±—â–∞–µ–º –æ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        4380,
        -40
      ],
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "6",
          "name": "–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç"
        }
      }
    },
    {
      "parameters": {
        "include": "except",
        "excludeFields": "type",
        "options": {}
      },
      "id": "04cc2357-1578-45ba-87d7-3abf11323d0d",
      "name": "–£–¥–∞–ª—è–µ–º —Ç–∏–ø",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3,
      "position": [
        3440,
        760
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "get",
        "pageId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "simple": false
      },
      "id": "666dc95c-3e9d-47c6-8c6d-3d415dd211f5",
      "name": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        3240,
        -280
      ],
      "credentials": {
        "notionApi": {
          "id": "4",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"chatid\": \"198424221\",\n  \"redis\": {\n    \"expiry\": 120\n  },\n  \"backlogs\": {\n    \"closed\": 200\n  },\n  \"statuses\": {\n    \"done\": \"–°–¥–µ–ª–∞–Ω–æ üôå\",\n    \"cancelled\": \"–û—Ç–º–µ–Ω–µ–Ω–æ\",\n    \"paused\": \"–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ\",\n    \"notdone\": \"–ù–µ —Å–¥–µ–ª–∞–Ω–æ\"\n  },\n  \"properties\": {\n    \"status\": \"–°—Ç–∞—Ç—É—Å\",\n    \"area\": \"–û–±–ª–∞—Å—Ç—å\",\n    \"deadline\": \"–î–µ–¥–ª–∞–π–Ω\",\n    \"workdaysOnly\": \"–¢–æ–ª—å–∫–æ –ø–æ –±—É–¥–Ω—è–º\",\n    \"importance\": \"–ó–Ω–∞—á–µ–Ω–∏–µ\",\n    \"difficulty\": \"–£—Å–∏–ª–∏–µ\",\n    \"result\": \"–†–µ–∑—É–ª—å—Ç–∞—Ç\",\n    \"repeatedNotifications\": \"–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\",\n    \"daysToExecute\": \"–î–Ω–µ–π –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ\",\n    \"title\": \"–ò–º—è\"\n  }\n}",
        "include": "none",
        "options": {
          "dotNotation": true
        }
      },
      "id": "e06b722a-9180-45a7-be8a-99547ca6d412",
      "name": "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3,
      "position": [
        1340,
        540
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.daysToExecute}}",
              "operation": "larger"
            }
          ]
        }
      },
      "id": "2bbdb89f-fe6b-42e5-9ecb-14c2d11cee4a",
      "name": "–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3440,
        940
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "–î–µ–¥–ª–∞–π–Ω|date",
              "includeTime": false,
              "date": "={{ DateTime.now().plus({ days: $json.properties['–î–Ω–µ–π –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ'].number - 1 }).toISODate() }}",
              "timezone": "Asia/Krasnoyarsk"
            }
          ]
        },
        "options": {}
      },
      "id": "54048f0c-87de-4bc8-84f6-081a2f931c18",
      "name": "–í–Ω–æ—Å–∏–º –¥–µ–¥–ª–∞–π–Ω",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        3700,
        940
      ],
      "retryOnFail": true,
      "credentials": {
        "notionApi": {
          "id": "4",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "return {\n  json: {\n    page: $('–§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ').item.json.id,\n    message: $input.item.json.result.message_id\n  }\n};"
      },
      "id": "87b7c9ff-69ec-4c8e-91e9-100601241e60",
      "name": "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4620,
        -40
      ]
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $json.page }}:messageID",
        "value": "={{ $json.message }}",
        "keyType": "string",
        "expire": true,
        "ttl": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.redis.expiry * 60 * 60 * 24 }}"
      },
      "id": "7541ae73-8161-4ca8-ad91-0a083e8a91c7",
      "name": "–í–ø–∏—Å—ã–≤–∞–µ–º messageID",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        4920,
        -40
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.repeatedNotifications.length }}",
              "operation": "larger"
            }
          ]
        }
      },
      "id": "d0bdc537-c9fe-4290-adb1-7bd441f7ba16",
      "name": "–í–∫–ª—é—á–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3440,
        1220
      ]
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $json.page }}:lastNotification",
        "value": "={{ DateTime.now().toISO() }}",
        "keyType": "string",
        "expire": true,
        "ttl": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.redis.expiry * 60 * 60 * 24 }}"
      },
      "id": "19b777a9-74f0-4246-9563-7afdaa2a10f8",
      "name": "–í–Ω–æ—Å–∏–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        4940,
        920
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "=lastNotification",
        "key": "={{ $json.id }}:lastNotification",
        "keyType": "string",
        "options": {}
      },
      "id": "43c3c36a-064d-44c5-b153-14e6b9665a89",
      "name": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        1660,
        340
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const page = JSON.parse(JSON.stringify($('–†–∞–∑–±–∏–≤–∞–µ–º –∏ –ø–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ').item.json));\npage.lastNotification = $input.item.json.lastNotification;\nreturn {\n  json: page\n};"
      },
      "id": "3f5771dd-8cf3-4429-bedc-5ac9b5237575",
      "name": "–í–ø–∏—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1900,
        340
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.properties.–°—Ç–∞—Ç—É—Å.select.name }}",
              "value2": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.statuses.done }}"
            },
            {
              "value1": "={{ $json.properties.–°—Ç–∞—Ç—É—Å.select.name }}",
              "value2": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.statuses.cancelled }}"
            }
          ],
          "boolean": [
            {
              "value1": "={{ $json.archived }}",
              "value2": true
            }
          ]
        },
        "combineOperation": "any"
      },
      "id": "03c978a5-7148-4384-ad1b-82fb4a33452c",
      "name": "–ó–∞—è–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞, –∑–∞–∫—Ä—ã—Ç–∞ –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3480,
        -280
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const parseFrequency = tokens => {\n  const numbers = {\n    \"–æ–¥–∏–Ω\": 1,\n    \"–æ–¥–Ω—É\": 1,\n    \"–¥–≤–∞\": 2,\n    \"–¥–≤–µ\": 2,\n    \"–≤—Ç–æ—Ä–æ–π\": 2,\n    \"—Ç—Ä–∏\": 3,\n    \"—Ç—Ä–µ—Ç–∏–π\": 3,\n    \"—á–µ—Ç—ã—Ä–µ\": 4,\n    \"—á–µ—Ç–≤—ë—Ä—Ç—ã–π\": 4,\n    \"–ø—è—Ç—å\": 5,\n    \"–ø—è—Ç—ã–π\": 5,\n    \"—à–µ—Å—Ç—å\": 6,\n    \"—à–µ—Å—Ç–æ–π\": 6,\n    \"—Å–µ–º—å\": 7,\n    \"—Å–µ–¥—å–º–æ–π\": 7,\n    \"–≤–æ—Å–µ–º—å\": 8,\n    \"–≤–æ—Å—å–º–æ–π\": 8,\n    \"–¥–µ–≤—è—Ç—å\": 9,\n    \"–¥–µ–≤—è—Ç—ã–π\": 9,\n    \"–¥–µ—Å—è—Ç—å\": 10,\n    \"–¥–µ—Å—è—Ç—ã–π\": 10,\n    \"–æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—å\": 11,\n    \"–æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—ã–π\": 11,\n    \"–¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å\": 12,\n    \"–¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—ã–π\": 12\n  };\n  const units = {\n    \"–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥\": \"milliseconds\",\n    \"—Å–µ–∫—É–Ω–¥\": \"seconds\",\n    \"–º–∏–Ω—É—Ç\": \"minutes\",\n    \"—á–∞—Å\": \"hours\",\n    \"–¥–µ–Ω—å\": \"days\",\n    \"–¥–Ω–µ–π\": \"days\",\n    \"–¥–Ω—è\": \"days\",\n    \"–Ω–µ–¥–µ–ª\": \"weeks\",\n    \"–º–µ—Å—è—Ü\": \"months\",\n    \"–∫–≤–∞—Ä—Ç–∞–ª\": \"quarters\",\n    \"–≥–æ–¥\": \"years\",\n    \"–ª–µ—Ç\": \"years\"\n  };\n  let number = 1;\n  let unit;\n  tokens.forEach(token => {\n    if (Number.isInteger(Number.parseInt(token))) {\n      number = token;\n      return;\n    };\n    if (numbers[token]) {\n      number = numbers[token];\n      return;\n    };\n    for (let i = token.length; i > 0; i--) {\n      if (units[token.slice(0, i)]) {\n        unit = units[token.slice(0, i)];\n        break;\n      };\n    };\n  });\n  if (!unit || !number) {\n    throw new Error(\"Couldn't parse the frequency string\");\n  };\n  const output = {};\n  output[unit] = number;\n  return output;\n};\n\nconst parse = tag => {\n  const tokens = tag.split(' ').map((token) => token.toLowerCase())\n  if (tokens[0] === '—Ä–∞–∑' && tokens[1] === '–≤') {\n    return parseFrequency(tokens.slice(2))\n  }\n  if (tokens[0].slice(0, 4) === '–∫–∞–∂–¥') {\n    return parseFrequency(tokens.slice(1))\n  }\n};\n\n$input.item.json.alarms = $input.item.json.repeatedNotifications.map(tag => {\n  if (tag.length === 5 && tag.match(/[0-9]{2}:[0-9]{2}/)) {\n    return DateTime.now().set({\n      hour: tag.slice(0, 2),\n      minute: tag.slice(3),\n      seconds: 0,\n      milliseconds: 0\n    }).toISO();\n  };\n  if ($input.item.json.lastNotification) {\n    return DateTime.fromISO($input.item.json.lastNotification).plus(parse(tag)).toISO();\n  } else {\n    return $input.item.json.last_edited_time;\n  }\n});\n\n$input.item.json.need_to_remind = $input.item.json.alarms.reduce((flag, alarm) => {\n  // console.log(`Difference between alarm and now is ${DateTime.fromISO(alarm).diffNow().toMillis()} and between last notification and alarm is ${DateTime.fromISO($input.item.json.lastNotification).diff(DateTime.fromISO(alarm)).toMillis()}`);\n  if (flag) return true;\n  return (\n    DateTime.fromISO(alarm).diffNow().toMillis() < 0 &&\n    DateTime.fromISO($input.item.json.lastNotification)\n                .diff(DateTime.fromISO(alarm)).toMillis() < 0\n  );\n}, false);\n\nreturn $input.item;"
      },
      "id": "3a172c42-05ca-46e1-b75e-62b87ee5b5c9",
      "name": "–í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞–ª—è—Ä–º",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3700,
        1220
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.need_to_remind }}",
              "value2": true
            }
          ]
        }
      },
      "id": "713b042a-9085-49b3-ab1d-411c232d5d85",
      "name": "–ù–∞–¥–æ –∞–ª—è—Ä–º–∏—Ç—å?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3960,
        1220
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è').all()[0].json.chatid }}",
        "text": "=<b>{{ $json.title }}</b>\n\n–ó–∞–¥–∞—á–∞ –≤—Å—ë –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–∞",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "–í—ã–ø–æ–ª–Ω–µ–Ω–æ",
                    "additionalFields": {
                      "callback_data": "={{ JSON.stringify({ type: \"endTask\", id: $json.id }) }}"
                    }
                  },
                  {
                    "text": "–û—Ç–∫—Ä—ã—Ç—å",
                    "additionalFields": {
                      "url": "={{ $json.url }}"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "disable_notification": "={{ $execution.mode === \"test\" ? true : false }}",
          "parse_mode": "HTML",
          "reply_to_message_id": "={{ $json.message_id }}"
        }
      },
      "id": "347d3198-fd46-4a8e-90f6-10739891ec6f",
      "name": "–ü–æ–≤—Ç–æ—Ä–Ω–æ —É–≤–µ–¥–æ–º–ª—è–µ–º",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        3960,
        1420
      ],
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "6",
          "name": "–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "message_id",
        "key": "={{ $json.id }}:messageID",
        "keyType": "string",
        "options": {}
      },
      "id": "a8954da7-3faa-4e36-bd4f-b10b640f13b4",
      "name": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º messageID",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        3440,
        1420
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const page = JSON.parse(JSON.stringify($('–ù–∞–¥–æ –∞–ª—è—Ä–º–∏—Ç—å?').item));\npage.json.message_id = $input.item.json.message_id;\nreturn page;"
      },
      "id": "4bfa8406-927d-4d6c-a0c4-4516dc685af3",
      "name": "–í–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3700,
        1420
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "return {\n  json: {\n    page: $('–ù–∞–¥–æ –∞–ª—è—Ä–º–∏—Ç—å?').item.json.id,\n    message: $input.item.json.result.message_id\n  }\n};"
      },
      "id": "3baf7ebc-34fe-472a-bbb3-f5e6224763b5",
      "name": "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4220,
        1420
      ]
    },
    {
      "parameters": {
        "resource": "block",
        "operation": "getAll",
        "blockId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "returnAll": true
      },
      "id": "bce9ffcc-f6b3-439a-98df-652c28943705",
      "name": "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        3460,
        520
      ],
      "retryOnFail": true,
      "credentials": {
        "notionApi": {
          "id": "4",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "operation": "push",
        "list": "blocks",
        "messageData": "={{ JSON.stringify($json) }}"
      },
      "id": "94db1f75-85d4-45c0-8c5e-f32b58fb6fb1",
      "name": "–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤ –≤ —Å–ø–∏—Å–æ—á–µ–∫",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        3980,
        320
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.end }}",
              "value2": true
            }
          ]
        }
      },
      "id": "932760db-d50e-4e85-9b30-08a00f0ad649",
      "name": "–ó–∞–∫–æ–Ω—á–∏–ª–∏?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3900,
        140
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "blocks",
        "key": "blocks",
        "keyType": "list",
        "options": {}
      },
      "id": "ee03c997-1a19-4482-a1f8-3226edd4486c",
      "name": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –±–ª–æ–∫–∏",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        4160,
        140
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {},
      "id": "caadf5e5-4178-485a-a3fb-0f2d06ca8167",
      "name": "–û–±—ä–µ–¥–∏–Ω—è–µ–º1",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        3560,
        -40
      ]
    },
    {
      "parameters": {
        "jsCode": "const _ = require('lodash');\nif (! $input.last().json?.blocks) {\n  return $input.all();\n};\nconst pages = $input.all().slice(0, -1).map(page => JSON.parse(JSON.stringify(page.json)));\nconst blocks = JSON.parse(JSON.stringify($input.last().json.blocks));\nconst inject = (parent, blocks) => {\n  const children = [];\n  const output = JSON.parse(JSON.stringify(parent));\n  // console.log(`Finding children of ${output.id} in ${JSON.stringify(blocks)}`);\n  while (_.findIndex(blocks, {\"parent_id\": output.id}) !== -1) {\n    const index = _.findIndex(blocks, {\"parent_id\": output.id})\n    children.push(JSON.parse(JSON.stringify(blocks[index])));\n    blocks.splice(index, 1);\n  };\n  output.children = children.map(child => {\n    if (child.has_children) {\n      return inject(child, blocks);\n    };\n    return child;\n  });\n  return output;\n};\nreturn pages.map(page => {\n  page = inject(page, blocks);\n  return page;\n});"
      },
      "id": "dff342d5-5491-4c4c-a34b-04aa46241c2e",
      "name": "–°–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–æ–µ–¥–∏–Ω–æ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3840,
        -40
      ]
    },
    {
      "parameters": {
        "operation": "delete",
        "key": "blocks"
      },
      "id": "c16e7606-8182-48be-ae57-d32264e89dbc",
      "name": "–£–¥–∞–ª—è–µ–º —Å–ø–∏—Å–æ–∫",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        4480,
        140
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.type }}",
              "value2": "missed"
            }
          ]
        }
      },
      "id": "97135a9e-779f-4997-bab2-e4c72e926f87",
      "name": "–≠—Ç–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2900,
        540
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.has_children }}",
              "value2": true
            }
          ]
        }
      },
      "id": "62e45c51-98f1-429a-9394-4f61ea28c87c",
      "name": "–£ –ø–æ—Ç–æ–º–∫–∞ –µ—Å—Ç—å –ø–æ—Ç–æ–º–∫–∏?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3780,
        540
      ]
    },
    {
      "parameters": {
        "jsCode": "let flag = true;\n$input.all().forEach(block => {\n  if (block.json.has_children) {\n    flag = false;\n  };\n});\nreturn {\n  json: {\n    end: flag\n  }\n};"
      },
      "id": "c7b4577a-5c43-4b31-a0f7-4402c1a979ae",
      "name": "–û—Å—Ç–∞–ª–∏—Å—å –µ—â—ë –ø–æ—Ç–æ–º–∫–∏?",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3660,
        140
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.type }}",
              "value2": "new"
            }
          ]
        }
      },
      "id": "c5c4765d-b11e-4b2f-ad23-9e9b30d11ba9",
      "name": "–≠—Ç–æ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3120,
        540
      ]
    },
    {
      "parameters": {
        "jsCode": "const lib = {};\nlib.annotation = textBlock => {\n  return \"\";\n};\nlib.mention = textBlock => {\n  return \"\";\n};\nlib.paragraph = block => {\n  return block[block.type].text.reduce((output, element) => {\n    return `${output}${lib[element.type](element)}`;\n  }, \"\");\n};\nlib.text = textBlock => {\n  return `${textBlock?.href ? \"<a href=\\\"\" + textBlock.href + \"\\\">\" : \"\"}${textBlock.annotations?.bold ? \"<b>\" : \"\"}${textBlock.annotations?.italic ? \"<i>\" : \"\"}${textBlock.annotaions?.strikethrough ? \"<s>\" : \"\"}${textBlock.annotations?.underline ? \"<u>\" : \"\"}${textBlock.annotations?.code ? \"<pre>\" : \"\"}${textBlock.plain_text}${textBlock.annotations?.code ? \"</pre>\" : \"\"}${textBlock.annotations?.underline ? \"</u>\" : \"\"}${textBlock.annotations?.strikethrough ? \"</s>\" : \"\"}${textBlock.annotations?.italic ? \"</i>\" : \"\"}${textBlock.annotations?.bold ? \"</b>\" : \"\"}${textBlock?.href ? \"</a>\" : \"\"}`;\n};\nlib.to_do = block => {\n  return lib.paragraph(block);\n};\nlib.unsupported = block => {\n  return \"\";\n};\nconst simplify = block => {\n  delete block.parent;\n  delete block.created_time;\n  delete block.last_edited_time;\n  delete block.created_by;\n  delete block.last_edited_by;\n  block.content = lib[block.type](block);\n  delete block[block.type];\n  return block;\n};\nconst output = $input.all()[0].json.blocks.map(block => {\n  return simplify(JSON.parse(block));\n});\nreturn {\n  json: {\n    blocks: output\n  }\n};"
      },
      "id": "95443dfa-d9f6-4f34-9ec6-637c4aff6d49",
      "name": "–£–ø—Ä–æ—â–∞–µ–º –±–ª–æ–∫–∏",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4480,
        320
      ]
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "const traverse = block => {\n  let message = \"\";\n  for (let i = block.children.length - 1; i >= 0; i--) {\n    message += `${block.children[i].content}\\n${block.children[i].has_children ? \"\\n\\t\" + traverse(JSON.parse(JSON.stringify(block.children[i]))) : \"\"}`;\n  };\n  return message;\n};\n$input.item.json.message = `<b>${$input.item.json.title}</b>\\n\\n${$input.item.json.deadline?.start ? \"–î–µ–¥–ª–∞–π–Ω: \" + DateTime.fromISO($input.item.json.deadline.start, {locale: \"ru\"}).toLocaleString({day: \"2-digit\", month: \"long\"}) : \"\"}\\n–ó–Ω–∞—á–µ–Ω–∏–µ: ${$input.item.json.importance}\\n–¢—Ä–µ–±—É–µ–º–æ–µ —É—Å–∏–ª–∏–µ: ${$input.item.json.difficulty}${$input.item.json?.children?.length ? \"\\n\" + traverse($input.item.json) : \"\"}`;\nreturn $input.item;"
      },
      "id": "2208eca9-a8db-4aa5-928f-669a30b6cd4b",
      "name": "–§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4100,
        -40
      ]
    },
    {
      "parameters": {
        "operation": "push",
        "list": "={{ $json.page }}:repeats",
        "messageData": "={{ $json.message }}"
      },
      "id": "366395ab-cff9-46d3-91b7-0267d3664d71",
      "name": "–í–ø–∏—Å—ã–≤–∞–µ–º messageID –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∏",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        4940,
        1420
      ],
      "credentials": {
        "redis": {
          "id": "KLIjLiAqGZRw4s2l",
          "name": "Notion"
        }
      }
    },
    {
      "parameters": {
        "url": "https://n8n.shitnsticks.top/webhook/44c7619c-a97e-4136-aed7-aac9113e892f",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "id",
              "value": "={{ $json.id }}"
            }
          ]
        },
        "options": {}
      },
      "id": "08fb2d12-a414-424a-b7cc-e960dd89ee38",
      "name": "–í—ã–∑—ã–≤–∞–µ–º webhook",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        3760,
        -280
      ],
      "retryOnFail": true,
      "credentials": {
        "httpBasicAuth": {
          "id": "EgZRCgDJmlkylYLj",
          "name": "Webhooks"
        }
      }
    }
  ],
  "connections": {
    "–ò–Ω—Ç–µ—Ä–≤–∞–ª": {
      "main": [
        [
          {
            "node": "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è": {
      "main": [
        [
          {
            "node": "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á",
            "type": "main",
            "index": 0
          },
          {
            "node": "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î": {
      "main": [
        [
          {
            "node": "–†–∞–∑–±–∏–≤–∞–µ–º –∏ –ø–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–†–∞–∑–±–∏–≤–∞–µ–º –∏ –ø–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ": {
      "main": [
        [
          {
            "node": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è": {
      "main": [
        [
          {
            "node": "–í–ø–∏—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–í–ø–∏—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è": {
      "main": [
        [
          {
            "node": "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º1": {
      "main": [
        [
          {
            "node": "–û–±—ä–µ–¥–∏–Ω—è–µ–º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á": {
      "main": [
        [
          {
            "node": "–ß–∏—Å—Ç–∫–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ß–∏—Å—Ç–∫–∞": {
      "main": [
        [
          {
            "node": "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º": {
      "main": [
        [
          {
            "node": "–û–±—ä–µ–¥–∏–Ω—è–µ–º",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "–û–±—ä–µ–¥–∏–Ω—è–µ–º": {
      "main": [
        [
          {
            "node": "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ": {
      "main": [
        [
          {
            "node": "–≠—Ç–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–≠—Ç–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞?": {
      "main": [
        [
          {
            "node": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–≠—Ç–æ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã": {
      "main": [
        [
          {
            "node": "–ó–∞—è–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞, –∑–∞–∫—Ä—ã—Ç–∞ –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ó–∞—è–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞, –∑–∞–∫—Ä—ã—Ç–∞ –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞?": {
      "main": [
        [
          {
            "node": "–í—ã–∑—ã–≤–∞–µ–º webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–≠—Ç–æ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞?": {
      "main": [
        [
          {
            "node": "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤",
            "type": "main",
            "index": 0
          },
          {
            "node": "–£–¥–∞–ª—è–µ–º —Ç–∏–ø",
            "type": "main",
            "index": 0
          },
          {
            "node": "–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω?",
            "type": "main",
            "index": 0
          },
          {
            "node": "–û–±—ä–µ–¥–∏–Ω—è–µ–º1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "–í–∫–ª—é—á–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–£–¥–∞–ª—è–µ–º —Ç–∏–ø": {
      "main": [
        [
          {
            "node": "–ü–∏—à–µ–º –¥–∞–Ω–Ω—ã–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–í–∫–ª—é—á–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è?": {
      "main": [
        [
          {
            "node": "–í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞–ª—è—Ä–º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞–ª—è—Ä–º": {
      "main": [
        [
          {
            "node": "–ù–∞–¥–æ –∞–ª—è—Ä–º–∏—Ç—å?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ù–∞–¥–æ –∞–ª—è—Ä–º–∏—Ç—å?": {
      "main": [
        [
          {
            "node": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º messageID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º messageID": {
      "main": [
        [
          {
            "node": "–í–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–í–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ": {
      "main": [
        [
          {
            "node": "–ü–æ–≤—Ç–æ—Ä–Ω–æ —É–≤–µ–¥–æ–º–ª—è–µ–º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–≤—Ç–æ—Ä–Ω–æ —É–≤–µ–¥–æ–º–ª—è–µ–º": {
      "main": [
        [
          {
            "node": "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã1": {
      "main": [
        [
          {
            "node": "–í–ø–∏—Å—ã–≤–∞–µ–º messageID –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∏",
            "type": "main",
            "index": 0
          },
          {
            "node": "–í–Ω–æ—Å–∏–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω?": {
      "main": [
        [
          {
            "node": "–í–Ω–æ—Å–∏–º –¥–µ–¥–ª–∞–π–Ω",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤": {
      "main": [
        [
          {
            "node": "–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤ –≤ —Å–ø–∏—Å–æ—á–µ–∫",
            "type": "main",
            "index": 0
          },
          {
            "node": "–£ –ø–æ—Ç–æ–º–∫–∞ –µ—Å—Ç—å –ø–æ—Ç–æ–º–∫–∏?",
            "type": "main",
            "index": 0
          },
          {
            "node": "–û—Å—Ç–∞–ª–∏—Å—å –µ—â—ë –ø–æ—Ç–æ–º–∫–∏?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–£ –ø–æ—Ç–æ–º–∫–∞ –µ—Å—Ç—å –ø–æ—Ç–æ–º–∫–∏?": {
      "main": [
        [
          {
            "node": "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–û—Å—Ç–∞–ª–∏—Å—å –µ—â—ë –ø–æ—Ç–æ–º–∫–∏?": {
      "main": [
        [
          {
            "node": "–ó–∞–∫–æ–Ω—á–∏–ª–∏?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ó–∞–∫–æ–Ω—á–∏–ª–∏?": {
      "main": [
        [
          {
            "node": "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –±–ª–æ–∫–∏",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ü–æ–¥–≥—Ä—É–∂–∞–µ–º –±–ª–æ–∫–∏": {
      "main": [
        [
          {
            "node": "–£–ø—Ä–æ—â–∞–µ–º –±–ª–æ–∫–∏",
            "type": "main",
            "index": 0
          },
          {
            "node": "–£–¥–∞–ª—è–µ–º —Å–ø–∏—Å–æ–∫",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–£–ø—Ä–æ—â–∞–µ–º –±–ª–æ–∫–∏": {
      "main": [
        [
          {
            "node": "–û–±—ä–µ–¥–∏–Ω—è–µ–º1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "–û–±—ä–µ–¥–∏–Ω—è–µ–º1": {
      "main": [
        [
          {
            "node": "–°–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–æ–µ–¥–∏–Ω–æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–°–æ–±–∏—Ä–∞–µ–º –≤—Å—ë –≤–æ–µ–¥–∏–Ω–æ": {
      "main": [
        [
          {
            "node": "–§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ": {
      "main": [
        [
          {
            "node": "–°–æ–æ–±—â–∞–µ–º –æ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–°–æ–æ–±—â–∞–µ–º –æ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ": {
      "main": [
        [
          {
            "node": "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–°–≤—è–∑—ã–≤–∞–µ–º messageID —Å ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã": {
      "main": [
        [
          {
            "node": "–í–ø–∏—Å—ã–≤–∞–µ–º messageID",
            "type": "main",
            "index": 0
          },
          {
            "node": "–í–Ω–æ—Å–∏–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "4"
  },
  "staticData": {
    "node:–ò–Ω—Ç–µ—Ä–≤–∞–ª": {
      "recurrencyRules": []
    }
  },
  "meta": null,
  "pinData": {},
  "versionId": "8882734c-282d-402f-ac36-6c7ba70c8f1a",
  "triggerCount": 1,
  "tags": []
}